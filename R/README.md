mareg
================

[mareg](https://github.com/BigelowLab/mareg) is a small alternative to
the much more robust and “live”
[mregions](https://CRAN.R-project.org/package=mregions) R package.

`mareg` simplifies access to **locally stored** data from [Marine
Regions](marineregions.org). Unlike `mregions`, `mareg` does not fetch
data for the user. Instead, the user downloads the desired data and
stores in a directory.

### Requirements

- [R v 4.1+](hlo1ttps://www.r-project.org/)

- [sf](https://CRAN.R-project.org/package=sf)

- [rappdirs](https://CRAN.R-project.org/package=rappdirs)

### Installation

    remotes::install_github("BigelowLab/mareg")

### The data path

Where the data directory resides is up to the user (mine is in
`~/Dropbox/data/marineregions`). The user then creates a hidden text
file, named `~/.marineregions` in the users home directory. The `mareg`
package reads that file automatically.

### Download data

Visit [Marine Regions](https://www.marineregions.org/downloads.php)
download portal to downlaod the data you desire. I choose
[geopackage](https://www.geopackage.org/) format - it plays well with
[sf](https://CRAN.R-project.org/package=sf), but other options are
available.

Move the downloaded data into the data directory you established. If you
download a zipped file, be sure to unpack it. If what gets unpacked is a
directory, move the entire directory into the data directory.

### Listing data

First check that the package is mining the hidden path descriptor file
correctly.

``` r
library(mareg)
mareg_root()
```

    ## [1] "~/Dropbox/data/marineregions"

Now list the contents (this will vary based upon what you have
downloaded…)

``` r
list_mareg()
```

    ## [1] "README.md"                   "World_EEZ_v11_20191118_gpkg"
    ## [3] "World_EEZ_v11_20191118_LR"

Hmmm. Let’s list what is inside.

``` r
list_mareg(recursive = TRUE)
```

    ##  [1] "README.md"                                          
    ##  [2] "World_EEZ_v11_20191118_gpkg/eez_boundaries_v11.gpkg"
    ##  [3] "World_EEZ_v11_20191118_gpkg/eez_v11.gpkg"           
    ##  [4] "World_EEZ_v11_20191118_gpkg/LICENSE_EEZ_v11.txt"    
    ##  [5] "World_EEZ_v11_20191118_LR/eez_v11_lowres.cpg"       
    ##  [6] "World_EEZ_v11_20191118_LR/eez_v11_lowres.dbf"       
    ##  [7] "World_EEZ_v11_20191118_LR/eez_v11_lowres.gpkg"      
    ##  [8] "World_EEZ_v11_20191118_LR/eez_v11_lowres.prj"       
    ##  [9] "World_EEZ_v11_20191118_LR/eez_v11_lowres.qpj"       
    ## [10] "World_EEZ_v11_20191118_LR/eez_v11_lowres.shp"       
    ## [11] "World_EEZ_v11_20191118_LR/eez_v11_lowres.shx"       
    ## [12] "World_EEZ_v11_20191118_LR/LICENSE_EEZ_v11.txt"

### Reading EEZ v11

We have an interest in EEZ v11, so we wrote a function for that. Fist we
read in the default low resolution.

``` r
lo <- read_eez() |>
  dplyr::glimpse()
```

    ## Rows: 281
    ## Columns: 32
    ## $ MRGID      <dbl> 8444, 8379, 8446, 8389, 8440, 8439, 8380, 8445, 8448, 8382,…
    ## $ GEONAME    <chr> "American Samoa Exclusive Economic Zone", "Ascension Exclus…
    ## $ MRGID_TER1 <dbl> 8670, 8620, 8672, 8623, 8656, 2259, 8619, 8671, 8674, 8621,…
    ## $ POL_TYPE   <chr> "200NM", "200NM", "200NM", "Overlapping claim", "200NM", "2…
    ## $ MRGID_SOV1 <dbl> 2204, 2208, 2227, 2208, 17, 2208, 2208, 8671, 8674, 2208, 2…
    ## $ TERRITORY1 <chr> "American Samoa", "Ascension", "Cook Islands", "Falkland / …
    ## $ ISO_TER1   <chr> "ASM", "SHN", "COK", "FLK", "PYF", "PCN", "SHN", "WSM", "TO…
    ## $ SOVEREIGN1 <chr> "United States", "United Kingdom", "New Zealand", "United K…
    ## $ MRGID_TER2 <dbl> 0, 0, 0, 8623, 0, 0, 0, 0, 0, 0, 0, 0, 2149, 2166, 0, 0, 0,…
    ## $ MRGID_SOV2 <dbl> 0, 0, 0, 2149, 0, 0, 0, 0, 0, 0, 0, 0, 2149, 2166, 0, 0, 0,…
    ## $ TERRITORY2 <chr> NA, NA, NA, "Falkland / Malvinas Islands", NA, NA, NA, NA, …
    ## $ ISO_TER2   <chr> NA, NA, NA, "FLK", NA, NA, NA, NA, NA, NA, NA, NA, "ARG", "…
    ## $ SOVEREIGN2 <chr> NA, NA, NA, "Argentina", NA, NA, NA, NA, NA, NA, NA, NA, "A…
    ## $ MRGID_TER3 <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
    ## $ MRGID_SOV3 <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
    ## $ TERRITORY3 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ ISO_TER3   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ SOVEREIGN3 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ X_1        <dbl> -169.06347, -14.36337, -161.30341, -58.32237, -144.00327, -…
    ## $ Y_1        <dbl> -13.85484, -7.94747, -15.01891, -51.66703, -18.73634, -24.6…
    ## $ MRGID_EEZ  <dbl> 8444, 8379, 8446, 8389, 8440, 8439, 8380, 8445, 8448, 8382,…
    ## $ AREA_KM2   <dbl> 407333, 447887, 1976459, 548502, 4781060, 844105, 450770, 1…
    ## $ ISO_SOV1   <chr> "USA", "GBR", "NZL", "GBR", "FRA", "GBR", "GBR", "WSM", "TO…
    ## $ ISO_SOV2   <chr> NA, NA, NA, "ARG", NA, NA, NA, NA, NA, NA, NA, NA, "ARG", "…
    ## $ ISO_SOV3   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ UN_SOV1    <dbl> 840, 826, 554, 826, 250, 826, 826, 882, 776, 826, 152, 554,…
    ## $ UN_SOV2    <dbl> NA, NA, NA, 32, NA, NA, NA, NA, NA, NA, NA, NA, 32, 218, NA…
    ## $ UN_SOV3    <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ UN_TER1    <dbl> 16, 654, 184, 238, 258, 612, 654, 882, 776, 654, 152, 570, …
    ## $ UN_TER2    <dbl> NA, NA, NA, 238, NA, NA, NA, NA, NA, NA, NA, NA, 32, 218, N…
    ## $ UN_TER3    <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ geom       <MULTIPOLYGON [°]> MULTIPOLYGON (((-166.6411 -..., MULTIPOLYGON (…

And compare that to the high resolution.

``` r
hi <- read_eez(res = "high") |>
  dplyr::glimpse()
```

    ## Rows: 281
    ## Columns: 32
    ## $ MRGID      <dbl> 8444, 8379, 8446, 8389, 8440, 8439, 8380, 8445, 8448, 8382,…
    ## $ GEONAME    <chr> "American Samoa Exclusive Economic Zone", "Ascension Exclus…
    ## $ MRGID_TER1 <dbl> 8670, 8620, 8672, 8623, 8656, 2259, 8619, 8671, 8674, 8621,…
    ## $ POL_TYPE   <chr> "200NM", "200NM", "200NM", "Overlapping claim", "200NM", "2…
    ## $ MRGID_SOV1 <dbl> 2204, 2208, 2227, 2208, 17, 2208, 2208, 8671, 8674, 2208, 2…
    ## $ TERRITORY1 <chr> "American Samoa", "Ascension", "Cook Islands", "Falkland / …
    ## $ ISO_TER1   <chr> "ASM", "SHN", "COK", "FLK", "PYF", "PCN", "SHN", "WSM", "TO…
    ## $ SOVEREIGN1 <chr> "United States", "United Kingdom", "New Zealand", "United K…
    ## $ MRGID_TER2 <dbl> 0, 0, 0, 8623, 0, 0, 0, 0, 0, 0, 0, 0, 2149, 2166, 0, 0, 0,…
    ## $ MRGID_SOV2 <dbl> 0, 0, 0, 2149, 0, 0, 0, 0, 0, 0, 0, 0, 2149, 2166, 0, 0, 0,…
    ## $ TERRITORY2 <chr> NA, NA, NA, "Falkland / Malvinas Islands", NA, NA, NA, NA, …
    ## $ ISO_TER2   <chr> NA, NA, NA, "FLK", NA, NA, NA, NA, NA, NA, NA, NA, "ARG", "…
    ## $ SOVEREIGN2 <chr> NA, NA, NA, "Argentina", NA, NA, NA, NA, NA, NA, NA, NA, "A…
    ## $ MRGID_TER3 <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
    ## $ MRGID_SOV3 <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
    ## $ TERRITORY3 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ ISO_TER3   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ SOVEREIGN3 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ X_1        <dbl> -169.06347, -14.36337, -161.30341, -58.32237, -144.00327, -…
    ## $ Y_1        <dbl> -13.85484, -7.94747, -15.01891, -51.66703, -18.73634, -24.6…
    ## $ MRGID_EEZ  <dbl> 8444, 8379, 8446, 8389, 8440, 8439, 8380, 8445, 8448, 8382,…
    ## $ AREA_KM2   <dbl> 405830, 446005, 1969553, 550566, 4766689, 842291, 449215, 1…
    ## $ ISO_SOV1   <chr> "USA", "GBR", "NZL", "GBR", "FRA", "GBR", "GBR", "WSM", "TO…
    ## $ ISO_SOV2   <chr> NA, NA, NA, "ARG", NA, NA, NA, NA, NA, NA, NA, NA, "ARG", "…
    ## $ ISO_SOV3   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ UN_SOV1    <dbl> 840, 826, 554, 826, 250, 826, 826, 882, 776, 826, 152, 554,…
    ## $ UN_SOV2    <dbl> NA, NA, NA, 32, NA, NA, NA, NA, NA, NA, NA, NA, 32, 218, NA…
    ## $ UN_SOV3    <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ UN_TER1    <dbl> 16, 654, 184, 238, 258, 612, 654, 882, 776, 654, 152, 570, …
    ## $ UN_TER2    <dbl> NA, NA, NA, 238, NA, NA, NA, NA, NA, NA, NA, NA, 32, 218, N…
    ## $ UN_TER3    <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ geom       <MULTIPOLYGON [°]> MULTIPOLYGON (((-166.6411 -..., MULTIPOLYGON (…
